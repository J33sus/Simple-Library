function addBook(e){let n=document.createElement("div");n.className="book";let o=document.createElement("img");e.volumeInfo.imageLinks?o.src=e.volumeInfo.imageLinks.thumbnail:o.src="./images/unknown.png";let a=document.createElement("div");a.className="book-image",a.appendChild(o),n.appendChild(a);let t=document.createElement("h2");t.innerText=e.volumeInfo.title,t.className="book-info--title",e.volumeInfo.description||(e.volumeInfo.description="Sin descripción.");let l=document.createElement("p");e.volumeInfo.description.length>600&&(e.volumeInfo.description=e.volumeInfo.description.slice(0,600),e.volumeInfo.description+="..."),l.innerText=e.volumeInfo.description,l.className="book-info--description";let i=document.createElement("div");i.className="book-info--preview-box";let s=document.createElement("a");s.href=e.volumeInfo.previewLink,s.innerText="Ver libro",s.target="_blank",s.className="book-info--preview",i.appendChild(s);let c=document.createElement("div");c.className="book-info",c.appendChild(t),c.appendChild(l),c.appendChild(i),n.appendChild(c),bookContainer.appendChild(n)}function bookProccessCallback(e){if("↑"==menuArrow.innerHTML&&toggleMenu(),loadingBooks.style.display="",e.items)for(const n of e.items)addBook(n);else alert("Sin resultados")}function bookSearchName(e){bookContainer.innerHTML="",loadingBooks.style.display="block",fetch(`https://www.googleapis.com/books/v1/volumes?q=${e.replace(" ","+")}&langRestrict=${langActual_page}&projection=lite&maxResults=15`).then(e=>e.json()).then(e=>bookProccessCallback(e))}function bookSearchCategory(e){bookContainer.innerHTML="",loadingBooks.style.display="block",fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e.id.substr(2,e.length)}&langRestrict=${langActual_page}&maxResults=15`).then(e=>e.json()).then(e=>bookProccessCallback(e))}function toggleMenu(){let e=document.getElementsByClassName("navbar-menu")[0],n=document.getElementsByClassName("navbar-menu--option");"↑"==menuArrow.innerHTML?menuArrow.innerHTML="↓":"↓"==menuArrow.innerHTML&&(menuArrow.innerHTML="↑"),e.classList.toggle("navbar-menu--enable");for(let e of n)e.classList.toggle("navbar-menu--option-enable")}function setPageLanguage(e){if(langInfo[langActual_page]!=e){if(null==langInfo[langActual_page]){langInfo[langActual_page]={};for(const e in langInfo.es){let n=document.getElementById(`l_${e}`);langInfo[langActual_page][e]="search-book"==e?n.placeholder:n.innerText}}for(const n in langInfo[e]){let o=document.getElementById(`l_${n}`);"search-book"==n?o.placeholder=langInfo[e][n]:o.innerText=langInfo[e][n]}for(const e in langInfo)document.getElementById(`header-language-${e}`).style.display="none";langActual_page=e,localStorage.setItem("language",e),document.getElementById(`header-language-${e}`).style.display="block"}}let searchBook=document.getElementById("l_search-book"),bookContainer=document.getElementById("container-books"),loadingBooks=document.getElementById("modal-loading-books"),menuArrow=document.getElementById("menu-arrow"),langInfo={es:{title:"Libreria",animals:"Animales",fiction:"Ciencia Ficción",fantasy:"Fantasía",mystery:"Misterio",love:"Romance",suspense:"Suspenso","search-book":"Buscar libro...",obtain_books:"obteniendo lista de libros",footer:"Libreria ® 2021"}},langActual_page="en";searchBook.addEventListener("keydown",function(e){if(!e.defaultPrevented){var n=e.key||e.keyCode;("Enter"===n||13===n&&searchBook.value.length>=1)&&(e.preventDefault(),bookSearchName(searchBook.value))}}),window.addEventListener("load",function(e){menuArrow.addEventListener("click",()=>toggleMenu()),document.getElementById("header-language-en").addEventListener("click",()=>setPageLanguage("es")),document.getElementById("header-language-es").addEventListener("click",()=>setPageLanguage("en")),setPageLanguage(localStorage.getItem("language"))});