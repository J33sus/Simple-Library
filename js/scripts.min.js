function addBook(e){let n=document.createElement("div");n.className="book";let o=document.createElement("img");e.volumeInfo.imageLinks?o.src=e.volumeInfo.imageLinks.thumbnail:o.src="./images/unknown.png";let t=document.createElement("div");t.className="book-image",t.appendChild(o),n.appendChild(t);let a=document.createElement("h2");a.innerText=e.volumeInfo.title,a.className="book-info--title",e.volumeInfo.description||(e.volumeInfo.description="Sin descripción.");let l=document.createElement("p");e.volumeInfo.description.length>600&&(e.volumeInfo.description=e.volumeInfo.description.slice(0,600),e.volumeInfo.description+="..."),l.innerText=e.volumeInfo.description,l.className="book-info--description";let i=document.createElement("div");i.className="book-info--preview-box";let s=document.createElement("a");s.href=e.volumeInfo.previewLink,s.innerText="Ver libro",s.target="_blank",s.className="book-info--preview",i.appendChild(s);let c=document.createElement("div");c.className="book-info",c.appendChild(a),c.appendChild(l),c.appendChild(i),n.appendChild(c),bookContainer.appendChild(n)}function bookProccessCallback(e){if(loadingBooks.style.display="",e.items)for(const n of e.items)addBook(n);else alert("Sin resultados")}function bookSearchName(e){bookContainer.innerHTML="",loadingBooks.style.display="block",fetch(`https://www.googleapis.com/books/v1/volumes?q=${e.replace(" ","+")}&langRestrict=${getPageLanguage()}&projection=lite&maxResults=15`).then(e=>e.json()).then(e=>bookProccessCallback(e))}function bookSearchCategory(e){bookContainer.innerHTML="",loadingBooks.style.display="block",console.log(e.id.substr(2,e.length)),fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e.id.substr(2,e.length)}&langRestrict=${getPageLanguage()}&maxResults=15`).then(e=>e.json()).then(e=>bookProccessCallback(e))}function setPageLanguage(e){let n=langInfo[e];if(null==n){langInfo[e]={};for(const n in langInfo.es)langInfo[e][n]="search-book"==n?document.getElementById(`l_${n}`).placeholder:document.getElementById(`l_${n}`).innerText}else for(const n in langInfo[e]){let o=document.getElementById(`l_${n}`);"search-book"==n?o.placeholder=langInfo[e][n]:o.innerText=langInfo[e][n]}localStorage.setItem("language",e),document.getElementById("header-language-en").style.display="none",document.getElementById("header-language-es").style.display="none",document.getElementById(`header-language-${e}`).style.display="block"}function getPageLanguage(){return localStorage.getItem("language")}let searchBook=document.getElementById("l_search-book"),bookContainer=document.getElementById("container-books"),loadingBooks=document.getElementById("modal-loading-books");searchBook.addEventListener("keydown",function(e){if(!e.defaultPrevented){var n=e.key||e.keyCode;("Enter"===n||13===n&&searchBook.value.length>=1)&&(e.preventDefault(),bookSearchName(searchBook.value))}});let langInfo={es:{title:"Libreria",animals:"Animales",fiction:"Ciencia Ficción",fantasy:"Fantasía",mystery:"Misterio",love:"Romance",suspense:"Suspenso","search-book":"Buscar libro...",obtain_books:"obteniendo lista de libros",footer:"Libreria ® 2021"}};window.addEventListener("load",function(e){document.getElementById("header-language-en").addEventListener("click",()=>{setPageLanguage("es")}),document.getElementById("header-language-es").addEventListener("click",()=>{setPageLanguage("en")}),setPageLanguage(null==getPageLanguage()?"en":getPageLanguage())});